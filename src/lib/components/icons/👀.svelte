<script lang="ts">
  import { onMount } from 'svelte';

  interface Props {
    size: number;
  }

  let { size }: Props = $props();

  onMount(() => {
    const eyelids = document.querySelectorAll<SVGPathElement>('.eyelid');

    function blink() {
      eyelids.forEach((eyelid) => {
        eyelid.style.transform = 'translateY(70%)';
        setTimeout(() => {
          eyelid.style.transform = 'translateY(0%)';
        }, 200);
      });
    }

    let timeout: number;

    function scheduleBlink() {
      // BLINK EVERY 1 TO 5 SECONDS
      timeout = Math.random() * 4000 + 1000;
      setTimeout(() => {
        blink();
        scheduleBlink();
      }, timeout);
    }

    blink();
    scheduleBlink();

    return () => {
      clearTimeout(timeout);
    };
  });
</script>

<svg width={size} height={size} viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path
    d="M35.9361 41.281C41.5583 41.281 46.1161 33.6698 46.1161 24.281C46.1161 14.8922 41.5583 7.28101 35.9361 7.28101C30.3138 7.28101 25.756 14.8922 25.756 24.281C25.756 33.6698 30.3138 41.281 35.9361 41.281Z"
    fill="white"
  />
  <path
    d="M12.376 41.281C17.9982 41.281 22.556 33.6698 22.556 24.281C22.556 14.8922 17.9982 7.28101 12.376 7.28101C6.75368 7.28101 2.19592 14.8922 2.19592 24.281C2.19592 33.6698 6.75368 41.281 12.376 41.281Z"
    fill="white"
  />
  <path
    d="M9.25 30.281C12.5637 30.281 15.25 27.5947 15.25 24.281C15.25 20.9673 12.5637 18.281 9.25 18.281C5.93629 18.281 3.25 20.9673 3.25 24.281C3.25 27.5947 5.93629 30.281 9.25 30.281Z"
    fill="var(--color-primary)"
  />
  <path
    d="M9.25 27.281C10.9069 27.281 12.25 25.9379 12.25 24.281C12.25 22.6242 10.9069 21.281 9.25 21.281C7.59315 21.281 6.25 22.6242 6.25 24.281C6.25 25.9379 7.59315 27.281 9.25 27.281Z"
    fill="#292F33"
  />
  <path
    d="M10.75 23.281C11.5784 23.281 12.25 22.6094 12.25 21.781C12.25 20.9526 11.5784 20.281 10.75 20.281C9.92157 20.281 9.25 20.9526 9.25 21.781C9.25 22.6094 9.92157 23.281 10.75 23.281Z"
    fill="white"
  />
  <path
    d="M33.25 30.281C36.5637 30.281 39.25 27.5947 39.25 24.281C39.25 20.9673 36.5637 18.281 33.25 18.281C29.9363 18.281 27.25 20.9673 27.25 24.281C27.25 27.5947 29.9363 30.281 33.25 30.281Z"
    fill="var(--color-primary)"
  />
  <path
    d="M33.25 27.281C34.9069 27.281 36.25 25.9379 36.25 24.281C36.25 22.6242 34.9069 21.281 33.25 21.281C31.5931 21.281 30.25 22.6242 30.25 24.281C30.25 25.9379 31.5931 27.281 33.25 27.281Z"
    fill="#292F33"
  />
  <path
    d="M34.75 23.281C35.5784 23.281 36.25 22.6094 36.25 21.781C36.25 20.9526 35.5784 20.281 34.75 20.281C33.9216 20.281 33.25 20.9526 33.25 21.781C33.25 22.6094 33.9216 23.281 34.75 23.281Z"
    fill="white"
  />
  <mask
    id="mask0_17466_2009"
    style="mask-type:alpha"
    maskUnits="userSpaceOnUse"
    x="24"
    y="6"
    width="24"
    height="37"
  >
    <path
      d="M35.9357 6.78101C38.992 6.78101 41.6736 8.84737 43.5637 12.0037C45.4596 15.17 46.6164 19.5119 46.6164 24.281C46.6164 29.0501 45.4596 33.392 43.5637 36.5583C41.6736 39.7146 38.992 41.781 35.9357 41.781C32.8796 41.7809 30.1988 39.7145 28.3088 36.5583C26.4127 33.392 25.256 29.0502 25.256 24.281C25.256 19.5118 26.4127 15.17 28.3088 12.0037C30.1988 8.84749 32.8796 6.78116 35.9357 6.78101Z"
      fill="var(--color-background)"
      stroke="var(--color-foreground)"
    />
  </mask>
  <g mask="url(#mask0_17466_2009)">
    <path
      class="eyelid"
      d="M36.1013 -31.8056C43.8155 -31.8055 50.2556 -26.7195 50.2556 -20.2382V15.4854H21.9461V-20.2382C21.9461 -26.7196 28.387 -31.8056 36.1013 -31.8056Z"
      fill="var(--color-background)"
      stroke="#28333D"
    />
  </g>
  <path
    d="M35.9357 6.78101C38.992 6.78101 41.6736 8.84737 43.5637 12.0037C45.4596 15.17 46.6164 19.5119 46.6164 24.281C46.6164 29.0501 45.4596 33.392 43.5637 36.5583C41.6736 39.7146 38.992 41.781 35.9357 41.781C32.8796 41.7809 30.1988 39.7145 28.3088 36.5583C26.4127 33.392 25.256 29.0502 25.256 24.281C25.256 19.5118 26.4127 15.17 28.3088 12.0037C30.1988 8.84749 32.8796 6.78116 35.9357 6.78101Z"
    stroke="var(--color-foreground)"
  />
  <mask
    id="mask1_17466_2009"
    style="mask-type:alpha"
    maskUnits="userSpaceOnUse"
    x="1"
    y="6"
    width="23"
    height="37"
  >
    <path
      d="M12.3756 6.78101C15.4319 6.78101 18.1135 8.84737 20.0035 12.0037C21.8995 15.17 23.0563 19.5119 23.0563 24.281C23.0563 29.0501 21.8995 33.392 20.0035 36.5583C18.1135 39.7146 15.4319 41.781 12.3756 41.781C9.3195 41.7809 6.63865 39.7145 4.74866 36.5583C2.85262 33.392 1.69592 29.0502 1.69592 24.281C1.69592 19.5118 2.85263 15.17 4.74866 12.0037C6.63865 8.84749 9.3195 6.78116 12.3756 6.78101Z"
      fill="var(--color-background)"
      stroke="var(--color-foreground)"
    />
  </mask>
  <g mask="url(#mask1_17466_2009)">
    <path
      class="eyelid"
      d="M12.1013 -31.8056C19.8155 -31.8055 26.2556 -26.7195 26.2556 -20.2382V15.4854H-2.05392V-20.2382C-2.05392 -26.7196 4.38705 -31.8056 12.1013 -31.8056Z"
      fill="var(--color-background)"
      stroke="#28333D"
    />
  </g>
  <path
    d="M12.3756 6.78101C15.4319 6.78101 18.1135 8.84737 20.0035 12.0037C21.8995 15.17 23.0563 19.5119 23.0563 24.281C23.0563 29.0501 21.8995 33.392 20.0035 36.5583C18.1135 39.7146 15.4319 41.781 12.3756 41.781C9.3195 41.7809 6.63865 39.7145 4.74866 36.5583C2.85262 33.392 1.69592 29.0502 1.69592 24.281C1.69592 19.5118 2.85263 15.17 4.74866 12.0037C6.63865 8.84749 9.3195 6.78116 12.3756 6.78101Z"
    stroke="var(--color-foreground)"
  />
</svg>

<style>
  .eyelid {
    transform: translateY(0%);
    transform-origin: center top;

    transition: transform 0.2s ease-in-out;
  }
</style>
